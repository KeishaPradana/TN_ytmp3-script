#!/data/data/com.termux/files/usr/bin/bash

# Warna
green='\e[1;32m'
red='\e[0;31m'
reset='\e[0m'

echo -e "${green}ğŸ“Œ Tempel link YouTube video/playlist untuk diunduh sebagai MP3.${reset}"
echo -ne "${green}ğŸµ Masukkan link: ${reset}"
read link

# Deteksi playlist
if [[ "$link" == *"list="* && "$link" != *"watch?v="* ]]; then
    echo -e "${green}ğŸ“‚ Mendeteksi playlist penuh...${reset}"
    yt-dlp -x --audio-format mp3 "$link"

# Deteksi video dalam playlist
elif [[ "$link" == *"watch?v="* && "$link" == *"list="* ]]; then
    echo -e "${green}ğŸµ Mendeteksi video dalam playlist...${reset}"
    video_only=$(echo "$link" | grep -oP 'watch\?v=[A-Za-z0-9_-]*')
    yt-dlp -x --audio-format mp3 "https://www.youtube.com/$video_only"

# Deteksi video tunggal
elif [[ "$link" == *"watch?v="* ]]; then
    echo -e "${green}ğŸ¶ Mendeteksi video tunggal...${reset}"
    yt-dlp -x --audio-format mp3 "$link"

# Link tidak valid
else
    echo -e "${red}âš ï¸ Link tidak valid. Pastikan itu link YouTube.${reset}"
fi

echo -e "${green}âœ… Selesai mengunduh MP3.${reset}"
