#!/data/data/com.termux/files/usr/bin/bash

# Cek input
if [ -z "$1" ]; then
  echo "Penggunaan: TNmp3dl \"link_youtube_video_or_playlist\""
  exit 1
fi

echo -e "\e[1;32mðŸ“¥ Memeriksa update yt-dlp...\e[0m"
pip install -U yt-dlp >/dev/null 2>&1

# Tentukan folder tujuan
TARGET="/sdcard/Download/"

echo -e "\e[1;32mðŸŽ¶ Sedang mengunduh dari: $1\e[0m"

# Unduh audio (otomatis bisa satu video atau playlist)
yt-dlp -x --audio-format mp3 --audio-quality 0 \
--user-agent "Mozilla/5.0" -o "%(title)s.%(ext)s" "$1"

# Pindahkan semua MP3 hasil download ke /sdcard/Download/
echo -e "\e[1;32mðŸ“‚ Memindahkan file .mp3 ke folder Download...\e[0m"
for file in *.mp3; do
  [ -f "$file" ] && mv "$file" "$TARGET"
done

echo -e "\e[1;32mâœ… Semua file MP3 disimpan di: $TARGET\e[0m"
echo -e "\e[1;32mTN_KeishaPradana\e[0m"
